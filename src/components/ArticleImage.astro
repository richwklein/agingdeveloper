---
/**
 * @name ArticleImage
 * Component used for rendering the featured image for an article
 *
 * @param {Props} props - The properties of the featured image.
 * @return {Function} an Astro component factory function.
 *
 * @example
 * <ArticleImage featured={featured} />
 */
import type { ImageMetadata } from "astro";
import ExternalLink from "./ExternalLink.astro";
import { Picture } from "astro:assets";

interface Props {
  featured: {
    image: ImageMetadata;
    author?: {
      name: string;
      url: string;
    };
    site?: {
      name: string;
      url: string;
    };
  };
  class?: string;
}
const {
  featured: { image, author, site },
  class: className,
} = Astro.props;
const alt = author != null ? author.name : "unknown";
---

<section id="article-featured" class:list={["mb-4", className]}>
  <figure>
    <Picture
      class:list={["aspect-video"]}
      src={image}
      alt={alt}
      formats={["webp"]}
      fallbackFormat={image.format}
      loading="eager"
      fetchpriority="high"
    />
    {
      author != null && site != null ? (
        <figcaption class:list={["mt-1 text-sm text-primary-main/85"]}>
          {author != null ? (
            <>
              {"Image by "}
              <ExternalLink class:list={["underline"]} to={author.url}>
                {author.name}
              </ExternalLink>
            </>
          ) : null}
          {site != null ? (
            <>
              {" on "}
              <ExternalLink class:list={["underline"]} to={site.url}>
                {site.name}
              </ExternalLink>
            </>
          ) : null}
        </figcaption>
      ) : null
    }
  </figure>
</section>
