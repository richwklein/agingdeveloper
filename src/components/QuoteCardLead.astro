---
/**
 * @name QuoteCardLead
 * Component used for rendering a card of a single quote as a chalkboard on the home page.
 *
 * @param {Props} props - The properties of the quote.
 * @return {Function} an Astro component factory function.
 *
 * @example
 * <QuoteCardLead quote={entry} class:list={['mt-4']} />
 */
import { formatDate } from '@utils/misc'
import type { CollectionEntry } from 'astro:content'

import LinkInternal from './LinkInternal.astro'
import QuoteSourceIcon from './QuoteSourceIcon.astro'

interface Props {
  quote: CollectionEntry<'quote'>
  class?: string
}

const { quote, class: className } = Astro.props
const source = quote.data.source
---

<LinkInternal to={'/quote'}>
  <div
    id="quote-card-lead"
    class:list={[
      'bg-black bg-[url("../content/image/chalkboard.jpg")] bg-cover bg-top-left',
      'font-chalk text-base text-slate-300',
      'rounded-md border-4 border-yellow-600',
      'flex h-full min-h-40 flex-col justify-between p-4',
      className,
    ]}
  >
    <figure>
      <blockquote class:list={['text-3xl tracking-wide']}>{quote.data.text}</blockquote>
      <figcaption class="mt-3 text-base text-slate-200">
        <div class="flex flex-wrap items-center gap-2">
          <span class="text-lg text-slate-100">
            &mdash;&nbsp;{quote.data.author}
            {
              source && (
                <span>
                  {' from '}
                  <em>{source.title}</em>
                </span>
              )
            }
          </span>
          {
            source && (
              <span class="inline-flex items-center gap-1 rounded-full border border-white/40 bg-white/10 px-3 py-1 text-[11px] font-semibold tracking-[0.08em] text-slate-100 uppercase shadow-sm shadow-black/30">
                <QuoteSourceIcon type={source.type} class:list={['h-4 w-4']} />
                {source.year ?? 'â€”'}
              </span>
            )
          }
        </div>
      </figcaption>
    </figure>

    <time datetime={quote.data.chalked.toISOString()} class:list={['mt-4 block']}>
      {formatDate(quote.data.chalked)}
    </time>
  </div>
</LinkInternal>
